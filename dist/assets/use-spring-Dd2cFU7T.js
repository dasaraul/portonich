import{r as t}from"./vendor-three-_Ju6PGMU.js";import{u as n,M as r,a as e}from"./index-CSBuqUNr.js";import{aa as o,z as s,B as a,al as c,am as u,an as i,d as f}from"./vendor-motion-DeJh657R.js";function m(e){const s=n((()=>o(e))),{isStatic:a}=t.useContext(r);if(a){const[,n]=t.useState(e);t.useEffect((()=>s.on("change",n)),[])}return s}function p(t,n){const r=m(n()),o=()=>r.set(n());return o(),e((()=>{const n=()=>s.preRender(o,!1,!0),r=t.map((t=>t.on("change",n)));return()=>{r.forEach((t=>t())),a(o)}})),r}function g(t,n,r,e){if("function"==typeof t)return function(t){c.current=[],t();const n=p(c.current,t);return c.current=void 0,n}(t);const o="function"==typeof n?n:u(n,r,e);return Array.isArray(t)?d(t,o):d([t],(([t])=>o(t)))}function d(t,r){const e=n((()=>[]));return p(t,(()=>{e.length=0;const n=t.length;for(let r=0;r<n;r++)e[r]=t[r].get();return r(e)}))}function h(n,e={}){const{isStatic:o}=t.useContext(r),s=()=>f(n)?n.get():n;if(o)return g(s);const a=m(s());return t.useInsertionEffect((()=>i(a,n,e)),[a,JSON.stringify(e)]),a}export{h as a,g as b,m as u};
